<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="../styles/bootstrap.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>

    <style>
        .card {
            height: 100%;
            width: 100%;
            background: linear-gradient(90deg, rgba(166, 247, 80, 0.04) 0%, rgba(166, 247, 80, 0) 69.95%), rgb(24, 28, 35);
        }

        .carousel-inner img {
            width: 600px;
            height: 400px;
            object-fit: fill;
        }

        .quantity-selection {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .quantity-btn {
            background-color: transparent;
            border: none;
            cursor: pointer;
            outline: none;
            color: #A6F750;
        }

        .minus-btn {
            padding-right: 5px;
        }

        .plus-btn {
            padding-left: 5px;
        }

        .quantity-value {
            margin: 0 10px;
            font-size: 20px;
        }
    </style>

    <title>Teste</title>

    <script>
        // Fetch data from the server and render the menu
        function fetchAndRenderMenu() {
            const apiUrl = 'https://parseapi.back4app.com/classes/menu';
            const headers = {
                'X-Parse-Application-Id': 'm4YkgcYnDUuV486nA7LyuK7BpE0Z4072JURTrgQR',
                'X-Parse-REST-API-Key': 'YoXbAgSt5C3NLFwLO8kFSnnzYLTQ0bXBC993qBzR'
            };

            fetch(apiUrl, { headers })
                .then(response => response.json())
                .then(data => {
                    renderMenu(data);
                })
                .catch(error => {
                    console.error('Error:', error);
                });
        }

        // Render the menu based on the fetched data
        function renderMenu(data) {
            renderSection(data, 'Lanches');
            renderSection(data, 'Sobremesas');
        }

        // Render a section of the menu based on the category
        function renderSection(data, category) {
            const menuContainer = document.getElementById('menu');
            const section = document.createElement('div');
            section.className = 'section';
            section.innerHTML = `
                <div class="row text-center bg-primary rounded py-3 mt-5" style="color: black;">
                    <h1><b> ${category} </b></h1>
                </div>
                <div class="row">
                    <div id="items" class="row row-cols-1 row-cols-md-2 g-4">
                    </div>
                </div>
            `;

            const itemsContainer = section.querySelector('#items');
            const filteredItems = data.results.filter(food => food.category === category);

            filteredItems.forEach(item => {
                const newItem = createMenuItem(item);
                itemsContainer.appendChild(newItem);
            });

            menuContainer.appendChild(section);
        }

        // Create a menu item element based on the data
        function createMenuItem(item) {
            const newItem = document.createElement('div');
            newItem.className = 'col';
            newItem.innerHTML = `
                <div class="card container">
                    <div class="row align-items-center">
                        <div class="col-md-4 px-0">
                            <img src="${item.image}" class="img-fluid" alt="..." style="width: auto; height: 195px;">
                        </div>
                        <div class="col-md-6">
                            <div class="card-body">
                                <h5 class="card-title">${item.title}</h5>
                                <p class="card-text">${item.description}</p>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="row justify-content-evenly align-items-center">
                                <p class="card-title" style="font-size: 24px;">R$ ${item.price}</p>
                                <div class="quantity-selection">
                                    <button class="quantity-btn minus-btn" onclick="decreaseQuantity()>
                                        <i class="bi bi-dash"></i>
                                    </button>
                                    <span class="quantity-value">1</span>
                                    <button class="quantity-btn plus-btn" onclick="increaseQuantity()>
                                        <i class="bi bi-plus"></i>
                                    </button>
                                </div>
                                <button class="btn btn-primary">
                                    <i class="bi bi-cart-plus"> Adicionar</i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            return newItem;
        }

        // Initialize the menu rendering
        fetchAndRenderMenu();

        let quantity = 1; // Initial quantity value

        function decreaseQuantity() {
            if (quantity > 1) {
                quantity--;
                document.querySelector('.quantity-value').textContent = quantity;
            }
        }

        function increaseQuantity() {
            quantity++;
            document.querySelector('.quantity-value').textContent = quantity;
        }
    </script>

</head>

<body>
    <div id="menu"></div>
</body>

</html>