<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="../styles/bootstrap.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>

    <style>
        .carousel-inner img {
            width: 600px;
            height: 400px;
            object-fit: fill;
        }

        .card {
            height: 100%;
            width: 100%;
            background: linear-gradient(90deg, rgba(166, 247, 80, 0.04) 0%, rgba(166, 247, 80, 0) 69.95%), rgb(24, 28, 35);
        }

        .quantity-selection {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .quantity-btn {
            background-color: transparent;
            border: none;
            cursor: pointer;
            outline: none;
            color: #A6F750;
        }

        .minus-btn {
            padding-right: 5px;
        }

        .plus-btn {
            padding-left: 5px;
        }

        .quantity-value {
            margin: 0 10px;
            font-size: 20px;
        }
    </style>

    <script>
        function decreaseQuantity(id) {
            console.log('decrease', id)
            const quantityElement = document.getElementById(id).querySelector('.quantity-value');
            const quantity = parseInt(quantityElement.textContent);
            if (quantity > 0) {
                quantity--;
                quantityElement.textContent = quantity;
            }
        }

        function increaseQuantity(id) {
            console.log('increase', id)
            const quantityElement = document.getElementById(id).querySelector('.quantity-value');
            const quantity = parseInt(quantityElement.textContent);
            quantity++;
            document.querySelector('.quantity-value').textContent = quantity;
        }

        function fetchAndRenderMenu() {
            const apiUrl = 'https://parseapi.back4app.com/classes/menu';
            const headers = {
                'X-Parse-Application-Id': 'm4YkgcYnDUuV486nA7LyuK7BpE0Z4072JURTrgQR',
                'X-Parse-REST-API-Key': 'YoXbAgSt5C3NLFwLO8kFSnnzYLTQ0bXBC993qBzR'
            };

            fetch(apiUrl, { headers })
                .then(response => response.json())
                .then(data => {
                    renderMenu(data);
                })
                .catch(error => {
                    console.error('Error:', error);
                });
        }

        function renderMenu(data) {
            renderSection(data, 'Lanches');
            renderSection(data, 'Sobremesas');
        }

        function renderSection(data, category) {
            const menuContainer = document.getElementById('menu');
            const section = document.createElement('div');
            section.className = 'section';
            section.innerHTML = `
            <div class="row text-center bg-primary rounded py-3 mt-5" style="color: black;">
                <h1><b> ${category} </b></h1>
            </div>
            <div class="row">
                <div id="items" class="row row-cols-1 row-cols-md-2 g-4">
                </div>
            </div>
        `;

            const itemsContainer = section.querySelector('#items');
            const filteredItems = data.results.filter(food => food.category === category);

            filteredItems.forEach(item => {
                const newItem = createMenuItem(item);
                itemsContainer.appendChild(newItem);
            });

            menuContainer.appendChild(section);
        }

        function createMenuItem(item) {
            const newItem = document.createElement('div');
            newItem.id = item.objectId;
            newItem.className = 'col';
            newItem.innerHTML = `
            <div class="card container"> 
                <div class="row align-items-center">
                    <div class="col-md-4 px-0">
                        <img src="${item.image}" class="img-fluid" alt="..." style="width: auto; height: 195px;">
                    </div>
                    <div class="col-md-6">
                        <div class="card-body">
                            <h5 class="card-title">${item.title}</h5>
                            <p class="card-text">${item.description}</p>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="row justify-content-evenly align-items-center">
                            <p class="card-title" style="font-size: 24px;">R$ ${item.price}</p>
                            <div class="quantity-selection">
                                <button class="quantity-btn minus-btn" onclick="decreaseQuantity(${item.objectId})">
                                    <i class="bi bi-dash"></i>
                                </button>
                                <span class="quantity-value">0</span>
                                <button class="quantity-btn plus-btn" onclick="increaseQuantity(${item.objectId})">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <button class="btn btn-primary">
                                <i class="bi bi-cart-plus"> Adicionar</i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        `;

            return newItem;
        }

        fetchAndRenderMenu();

    </script>

    <title>Cardápio</title>

</head>

<body class="d-flex justify-content-center align-items-center">

    <div class="container">

        <div class="col">
            <div class="d-flex justify-content-between">
                <img style="max-width: 200px;" src="../images/geek_byte.logo.png" alt="Imagem" class="imagem">
            </div>
            <div class="row text-center bg-primary rounded py-3 my-3" style="color: black;">
                <h1> <b>Cardápio</b></h1>
            </div>
            <div class="row">
                <div id="carouselExampleAutoplaying" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img src="../images/burguer-de-picanha.jpg" class="d-block w-100" alt="...">
                        </div>
                        <div class="carousel-item">
                            <img src="../images/batata.jpeg" class="d-block w-100" alt="...">
                        </div>
                        <div class="carousel-item">
                            <img src="../images/trio hamburguer.jpg" class="d-block w-100" alt="...">
                        </div>
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleAutoplaying"
                        data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleAutoplaying"
                        data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
            </div>

            <div id="menu"></div>

</body>

</html>